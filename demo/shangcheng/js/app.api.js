var EnvironmentConfig={url:"http://wechat.mei1.com",C_merchantId:0x4fc168eee2554,file_path:"http://wechat.mei1.com/api/file/",app_id:"wxf93e05a73a815015",bc_app_id:"1b0af0e6-96e1-48c4-8c97-b1bf1e218c8e",wechat:"mei1com"};
String.prototype.getParameterKey=function(e){for(var a=this.substr(1,this.length),r=a.split("&"),t=0;t<r.length;t++){var s=r[t];if(s.split("=")[0]==e)return s.split("=")[1]}return""},window.keyGetValue=function(e){return window.location.search.getParameterKey(e)};var app=function(e){var e=e||{};return e.url=window.location.origin,e.filePath=window.location.origin+"/api/file/",e.api={url:e.url+"/api",ajax:function(a){function r(e){e&&302==e.code?window.location.href=e.data:a.success(e)}function t(e){switch(e.status){case 401:case 403:window.location.href=window.location.origin+"/index.html"+window.location.search;break;case 404:break;default:a.error(e)}}if(-1!=a.url.indexOf("/wechat/signature/")||-1!=a.url.indexOf("/festivalActivitie/search"))var s=e.api.url+a.url;else var s=e.api.url+a.url+"?merchantId="+keyGetValue("merchantid")+"&wechat=customer";var c={url:s,async:!a.async||a.async,type:a.type,headers:{Accept:"*/*","Content-Type":"application/json"},dataType:"json",success:r,error:t};a.data&&("GET"===a.type.toUpperCase()||(c.data=JSON.stringify(a.data))),$.ajax(c)}},{api:e.api,url:e.url,filePath:e.filePath}}();!function(e){e.api.user={getVerificationcode:function(a){e.api.ajax({url:"/wechatproxy/verificationcode/"+a.data.mobilephone,type:"GET",success:a.success,error:a.error})},generate:function(a){e.api.ajax({url:"/verifications/generate",type:"post",success:a.success,error:a.error,data:a.data})},userBinduser:function(a){e.api.ajax({url:"/wechatproxy/binduser/"+a.data.merchantId+"/"+a.data.mobilephone+"/"+a.data.verifyNo+"/"+a.data.openid,type:"GET",success:a.success,error:a.error})},uploadFile:function(a){e.api.ajax({url:"/file",type:"POST",success:a.success,error:a.error,data:a.data})},queryUserinfo:function(a){var r=!!a.async&&a.async;e.api.ajax({url:"/wechatproxy/getBpoUserByOpenId/"+a.data.merchantId+"/"+a.data.openid,type:"GET",async:r,success:a.success,error:a.error})},updateUserinfo:function(a){e.api.ajax({url:"/wechatproxy/updateBpoUser/"+a.data.merchantId,type:"POST",success:a.success,error:a.error,data:a.data.user})},unbind:function(a){e.api.ajax({url:"/wechatproxy/unBind",type:"POST",success:a.success,error:a.error,data:a.data})},creatUser:function(a){e.api.ajax({url:"/wechatproxy/addBpoUser/"+a.data.openid+"/"+a.data.phone,type:"POST",success:a.success,error:a.error,data:a.data})},userCardAndCoupon:function(a){e.api.ajax({url:"/wechatproxy/getBpoUserInfoByOpenId/"+a.data.merchantid+"/"+a.data.openid,type:"GET",success:a.success,error:a.error,data:a.data})}},e.api.store={queryStoreList:function(a){var r;r=a.data.latitude?"/wechatproxy/mystoreList/"+a.data.merchantId+"/"+a.data.bpoUserId+"/"+a.data.latitude+"/"+a.data.longitude:"/wechatproxy/mystoreList/"+a.data.merchantId+"/"+a.data.bpoUserId,e.api.ajax({url:r,type:"GET",success:a.success,error:a.error})},queryAllStoreList:function(a){var r;r=a.data.latitude?"/wechatproxy/mystoreList/"+a.data.merchantId+"/"+a.data.bpoUserId+"/"+a.data.latitude+"/"+a.data.longitude:"/wechatproxy/appointmentStoreList/"+a.data.merchantId+"/"+a.data.bpoUserId,e.api.ajax({url:r,type:"GET",success:a.success,error:a.error})},queryStoreDetail_old:function(a){e.api.ajax({url:"/wechatproxy/storeDetail/"+a.data.merchantId+"/"+a.data.storeid,type:"GET",success:a.success,error:a.error})},queryStoreDetail:function(a){e.api.ajax({url:"/wechatStore/getWechatStoreDetail/"+a.data.storeId,type:"GET",success:a.success,error:a.error})},queryStoreEvaluate:function(a){e.api.ajax({url:"/wechatproxy/storeEvaluate/"+a.data.storeid+"/"+a.data.page+"/"+a.data.size,type:"GET",success:a.success,error:a.error})},queryStoreTime:function(a){e.api.ajax({url:"/wechatproxy/appointmentStartInfo/"+a.data.merchantId+"/"+a.data.storeId,type:"GET",success:a.success,error:a.error})},queryStoreItem:function(a){e.api.ajax({url:"/wechatproxy/moreItem/"+a.data.bindMerchantId+"/"+a.data.merchantId+"/"+a.data.storeid+"/"+a.data.page+"/"+a.data.size+"/"+a.data.itemName||"null",type:"GET",success:a.success,error:a.error})},queryItemById:function(a){e.api.ajax({url:"/wechatproxy/iteminfo/"+a.data.itemid,type:"GET",success:a.success,error:a.error})},unbindMerchant:function(a){e.api.ajax({url:"/bpoUserSubscribleMerchant/unSubscrible",type:"POST",data:a.data,success:a.success,error:a.error})},employeeOccupy:function(a){e.api.ajax({url:"/wechatproxy/employeeOccupy/"+a.data.storeId+"/"+a.data.time,type:"get",success:a.success,error:a.error})},searchEmployee:function(a){e.api.ajax({url:"/employee/listBystoreDetail/"+a.data.storeId,type:"get",data:a.data,success:a.success,error:a.error})}},e.api.appointment={searchItem:function(a){e.api.ajax({url:"/serviceItem/"+a.id,type:"GET",success:a.success,error:a.error})},appointmentStart:function(a){var r;r=a.data.latitude?"/wechatproxy/storeList/"+a.data.bindmerchantId+"/"+a.data.merchantId+"/"+a.data.latitude+"/"+a.data.longitude:"/wechatproxy/storeList/"+a.data.bindmerchantId+"/"+a.data.merchantId,e.api.ajax({url:r,type:"GET",success:a.success,error:a.error})},centerBooking:function(a){e.api.ajax({url:"/wechatproxy/appointmentCommit",type:"POST",data:a.data,success:a.success,error:a.error})},getAppointmentList:function(a){e.api.ajax({url:"/wechatproxy/appointmentRecord/",type:"post",success:a.success,data:a.data,error:a.error})},removeAppointment:function(a){e.api.ajax({url:"/wechatproxy/appointmentCancel/"+a.data.bindMerchantId+"/"+a.data.orderId,type:"get",success:a.success,error:a.error})},queryBkingMember:function(a){e.api.ajax({url:"/wechatproxy/bookingUserName/"+a.data.merchantId+"/"+a.data.userId,type:"GET",success:a.success,error:a.error})}},e.api.card={cardBagList:function(a){e.api.ajax({url:"/wechatproxy/cardbaglist/"+a.data.merchantId+"/"+a.data.openId,type:"GET",success:a.success,error:a.error})},cardInfo:function(a){e.api.ajax({url:"/wechatproxy/cardInfo/",type:"post",data:a.data,success:a.success,error:a.error})},cardHistory:function(a){e.api.ajax({url:"/wechatproxy/getCardTradeRecord/",type:"post",data:a.data,success:a.success,error:a.error})},cardcontent:function(a){e.api.ajax({url:"/wechatproxy/cardcontent/",type:"post",data:a.data,success:a.success,error:a.error})}},e.api.coupon={couponBagList:function(a){e.api.ajax({url:"/wechatproxy/tickets/"+a.data.merchantId+"/"+a.data.openId,type:"GET",success:a.success,error:a.error})},couponDetail:function(a){e.api.ajax({url:"/wechatproxy/ticketDetail/"+a.data.ticketId+"/"+a.data.merchantId,type:"GET",success:a.success,error:a.error})}},e.api.consumeRecords={getConsumeRecords:function(a){e.api.ajax({url:"/wechatproxy/consumeRecords/",type:"post",success:a.success,data:a.data,error:a.error})},queryOrderDetail:function(a){e.api.ajax({url:"/wechatproxy/getOrderDetail/"+a.data.orderId,type:"GET",success:a.success,data:a.data,error:a.error})}},e.api.evaluate={getEevaluate:function(a){e.api.ajax({url:"/wechatproxy/queryOrderRate/"+a.data.merchantId+"/"+a.data.storeId+"/"+a.data.orderId,type:"get",success:a.success,error:a.error})},posEevaluate:function(a){e.api.ajax({url:"/wechatproxy/customerOrderEvaluate/",type:"post",success:a.success,data:a.data,error:a.error})}},e.api.JSSignature={getJSSignature:function(a){e.api.ajax({url:"/wechat/signature/"+a.data.merchantId+"/"+a.data.token+"?url="+a.data.url,type:"GET",data:a.data,success:function(e){e.success?wx.config({debug:!1,appId:e.data.appId,timestamp:e.data.timestamp,nonceStr:e.data.nonceStr,signature:e.data.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","openLocation","chooseWXPay","hideMenuItems","getLocation"]}):a.error(),wx.error(function(e){}),wx.ready(function(){a.success(e)})},error:a.error})},shareAppMessag:function(e){wx&&(wx.onMenuShareTimeline({title:e.data.title,desc:e.data.desc,link:e.data.link,imgUrl:e.data.imgUrl,type:e.data.type,dataUrl:"",success:e.success,cancel:e.cancel}),wx.onMenuShareAppMessage({title:e.data.title,desc:e.data.desc,link:e.data.link,imgUrl:e.data.imgUrl,type:e.data.type,dataUrl:"",success:e.success,cancel:e.cancel}))},chooseWXPay:function(e){wx&&wx.chooseWXPay({timestamp:e.data.timestamp,nonceStr:e.data.nonceStr,package:e.data.package,signType:e.data.signType,paySign:e.data.paySign,success:e.success,fail:e.fail,cancel:e.cancel})},hideMenuItems:function(){wx&&wx.hideMenuItems({menuList:["menuItem:share:qq","menuItem:share:weiboApp","menuItem:share:facebook","menuItem:share:QZone","menuItem:copyUrl","menuItem:openWithQQBrowser","menuItem:openWithSafari"]})},openLocation:function(e){wx.openLocation({latitude:e.data.latitude,longitude:e.data.longitude,name:e.data.name,address:e.data.address,scale:28,infoUrl:""})}},e.api.promotions={drawPrize:function(a){e.api.ajax({url:"/wechatbigwheel/receivePrize/",type:"POST",data:a.data,success:a.success,error:a.error})},luckyDraw:function(a){e.api.ajax({url:"/bigwheel/luckyDraw/",type:"POST",data:a.data,success:a.success,error:a.error})},promotionsView:function(a){e.api.ajax({url:"/promotionMobile/view",type:"POST",data:a.data,success:a.success,error:a.error})},queryUserinfo:function(a){e.api.ajax({url:"/wechatbigwheel/queryUserinfo/"+a.data.openid+"/"+a.data.promotionId,type:"GET",success:a.success,error:a.error})},usershare:function(a){e.api.ajax({url:"/wechatbigwheel/usershare",type:"POST",data:a.data,success:a.success,error:a.error})},createQRcode:function(a){if(EnvironmentConfig.C_merchantId==a.data.actionInfo)var r="tm";else var r="dm";e.api.ajax({url:"/wechat/operating/qr/"+r+"/"+a.data.actionInfo+"/"+a.data.actionInfo,type:"GET",success:a.success,error:a.error})},purchase:function(a){e.api.ajax({url:"/promotions/purchase",type:"POST",data:a.data,success:a.success,error:a.error})},customerApply:function(a){e.api.ajax({url:"/customerApply",type:"POST",data:a.data,success:a.success,error:a.error})},share:function(a){e.api.ajax({url:"/promotionMobile/share",type:"POST",data:a.data,success:a.success,error:a.error})},getBpoUserByCampaign:function(a){var r=!!a.async&&a.async;e.api.ajax({url:"/wechatproxy/getBpoUserByCampaign/"+a.data.merchantId+"/"+a.data.openid,type:"GET",async:r,success:a.success,error:a.error})}},e.api.platformOrder={savePlatformOrder:function(a){e.api.ajax({url:"/platformOrder/savePlatformOrder",type:"POST",data:a.data,success:a.success,error:a.error})},payPlatformOrder:function(a){e.api.ajax({url:"/platformOrder/payPlatformOrder/"+a.data.payPlatformOrderId,type:"POST",data:a.data,success:a.success,error:a.error})},queryPlatformOrders:function(a){e.api.ajax({url:"/platformOrder/getPlatformOrders",type:"POST",data:a.data,success:a.success,error:a.error})},againPayPlatformOrder:function(a){e.api.ajax({url:"/platformOrder/payPlatformOrder/"+a.data.payPlatformOrderId,type:"POST",data:a.data,success:a.success,error:a.error})}},e.api.buyGifts={share:function(a){e.api.ajax({url:"/promotions/share",type:"POST",data:a.data,success:a.success,error:a.error})},complateuser:function(a){e.api.ajax({url:"/promotions/complateuser/"+a.data.id+"/"+a.data.userid,type:"GET",data:a.data,success:a.success,error:a.error})}},e.api.wifi={query:function(a){e.api.ajax({url:"/promotions/view/"+a.data.merchantId+"/"+a.data.openid,type:"GET",success:a.success,error:a.error})},queryShop:function(a){e.api.ajax({url:"/wifiMarketing/getMarketingByWechat/"+a.data.merchantId+"/"+a.data.shopId,type:"get",success:a.success,error:a.error})},postWifiInfo:function(a){e.api.ajax({url:"/wechatproxy/akey/to/internet",type:"post",data:a.data,success:a.success,error:a.error})}},e.api.groupBuy={createGroup:function(a){e.api.ajax({url:"/groupbuy/opengroup",type:"post",data:a.data,success:a.success,error:a.error})},getGroupList:function(a){e.api.ajax({url:"/groupbuy/groupIng/"+a.data.promotionInstanceId,type:"get",success:a.success,error:a.error})},checkUser:function(a){e.api.ajax({url:"/groupbuy/personal/join",type:"post",data:a.data,success:a.success,error:a.error})},alreadyGroupPay:function(a){e.api.ajax({url:"/groupbuy/pay/immediately/"+a.data.platOrderId,type:"get",success:a.success,error:a.error})},validate:function(a){e.api.ajax({url:"/groupbuy/userInfo/validate/"+a.data.openid,type:"get",success:a.success,error:a.error})},updateUserPhone:function(a){e.api.ajax({url:"/wechatproxy/addBpoUser/"+a.data.openid+"/"+a.data.phone,type:"post",data:a.data,success:a.success,error:a.error})},queryGroupFile:function(a){e.api.ajax({url:"/groupjoin/avatarIds/"+a.data.groupNo,type:"get",success:a.success,error:a.error})},updateUid:function(a){e.api.ajax({url:"/wechatproxy/forwardParams/"+a.data.uid+"/"+a.data.promotionGroupJoinId,type:"get",data:a.data,success:a.success,error:a.error})}},e.api.parsent={queryPresents:function(a){e.api.ajax({url:"/wechatproxy/getMemberPresents/",type:"post",data:a.data,success:a.success,error:a.error})}},e.api.order={getOrder:function(a){var r="/orderApi/thirdPay/payDetail/"+a.data.orderid;a.data.brower_type&&(r+="/"+a.data.brower_type),e.api.ajax({url:r,type:"get",success:a.success,error:a.error})}},e.api.merchandise={queryItemSort:function(a){e.api.ajax({url:"/bpoItemExtra/getAllCatagorys/"+a.data.merchantId,type:"get",success:a.success,error:a.error})},queryItemList:function(a){e.api.ajax({url:"/wechatWindowSell/list/",type:"post",success:a.success,data:a.data,error:a.error})},queryItem_old:function(a){e.api.ajax({url:"/bpoItemExtra/"+a.data.id,type:"get",success:a.success,error:a.error})},queryItem:function(a){e.api.ajax({url:"/wechatItem/getWechatItemDetail/"+a.data.id,type:"get",success:a.success,error:a.error})},checkUser:function(a){e.api.ajax({url:"/wechatproxy/checkBpoUserbyOpenid/"+a.data.openId+"/"+a.data.merchantId,type:"get",success:a.success,error:a.error})},payOrder:function(a){e.api.ajax({url:"/wechatItem/payWechatItem",type:"post",success:a.success,data:a.data,error:a.error})}},e.api.redEnvelope={getActivityDetail:function(a){e.api.ajax({url:"/promotions/view/"+a.data,type:"get",success:a.success,error:a.error})},getRedEnvelopeInfo:function(a){e.api.ajax({url:"/redEnvelopeJoin/openId/"+a.data.openid+"/"+a.data.promotionInstanceId,type:"get",success:a.success,error:a.error})},redEnvelopeJoin:function(a){e.api.ajax({url:"/redEnvelopeJoin/join",type:"POST",success:a.success,error:a.error,data:a.data})}},e.api.employee={queryEmployeeDetail:function(a){e.api.ajax({url:"/craftsman/getCraftsmanDetail/"+a.data,type:"get",success:a.success,error:a.error})}},e.api.ticket={sendTicket:function(a){e.api.ajax({url:"/ticketInstance/sendTicket/"+a.data.merchantId+"/"+a.data.mobile+"/"+a.data.ticketDefineId,type:"POST",success:a.success,error:a.error,data:a.data})},getBpoBaseInfo:function(a){e.api.ajax({url:"/wechatproxy/getBpoBaseInfo/"+a.data.merchantId,type:"get",success:a.success,error:a.error,data:a.data})},handselTicket:function(a){e.api.ajax({url:"/wechatTemplateUrl/handselTicket/"+a.data.merchantId,type:"GET",success:a.success,error:a.error})}},e.api.mjj={queryList:function(a){e.api.ajax({url:"/festivalActivitie/search?cityCode="+a.data.code+"&page="+a.data.page+"&rows="+a.data.rows,type:"GET",success:a.success,error:a.error})},listClickNotes:function(a){e.api.ajax({url:"/festivalActivitieFlowRecord",type:"post",data:a.data,success:a.success,error:a.error})},openAndjoin:function(a){e.api.ajax({url:"/promotiongroup/openAndjoin",type:"post",data:a.data,success:a.success,error:a.error})},prepay:function(a){e.api.ajax({url:"/promotiongroup/prepay",type:"post",data:a.data,success:a.success,error:a.error})},checkUser:function(a){e.api.ajax({url:"/promotiongroup/getDetailByGroupId/"+a.data.promotionGroupJoinId,type:"get",success:a.success,error:a.error})},getQrcode:function(a){e.api.ajax({url:"/platformOrder/thirdPay/getQrCode/"+a.data.id,type:"get",success:a.success,error:a.error})},checkQrcodePaySuccess:function(a){e.api.ajax({url:"/platformOrder/thirdPay/checkPaySuccess/"+a.data.id,type:"get",success:a.success,error:a.error})},getOrder:function(a){var r="/platformOrder/thirdPay/payDetail/"+a.data.orderid+"/"+a.data.brower_type;a.data.openid?r+="/"+a.data.openid:r+="/null",e.api.ajax({url:r,type:"get",success:a.success,error:a.error})},getGroupList:function(a){e.api.ajax({url:"/groupbuy/getGroupJoinInfoByMjj/"+a.data.promotionInstanceId,type:"get",success:a.success,error:a.error})},getCouponDetail:function(a){e.api.ajax({url:"/ticketInstance/getTicketInstanceDetail/"+a.data.id,type:"get",success:a.success,error:a.error})}}}(app);
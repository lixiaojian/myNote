!function(){function e(){c.style.backgroundColor="#ef7b52",k.removeAllChildren(),k.addChild(C),k.addChild(E),k.addChild(S),k.addChild(L),v=10,y=0,g=null}function n(){if(!g)return void alert("请输入角色名称");c.style.backgroundColor="#84e1fc",document.body.style.backgroundColor="#84e1fc",k.removeAllChildren();var e="M"==w?"app_img/man.png":"app_img/woman.png",n="M"==w?"app_img/man2.png":"app_img/woman2.png";A=a(e,0,70*p),X=a(n,0,70*p),A.scaleX=A.scaleY=.8*p,X.scaleX=X.scaleY=.8*p,X.alpha=0;var l=new b.Container,t=i(g,169*p,0,35*p+"px Arial","#ff1700");t.maxWidth=292*p,t.textAlign="center",l.addChild(t,A,X),l.x=395*p,l.y=630*p,x=l,k.addChild(T,Y,N,B,F,P,W,j,l),s=!0}function a(e,n,a,i){var l=new b.Bitmap(e);return l.x=n*p,l.y=a*p,l.scaleX=l.scaleY=p,void 0!==i&&(l.alpha=i),l}function i(e,n,a,i,l){var e=new b.Text(e,i,l);return e.x=n*p,e.y=a*p,e}function l(e,n){var i=new b.Container,l=a("app_img/barrel-cap.png",8,0);l.name="cap";var t=a("app_img/barrel-shdow.png",0,60);t.name="shdow";var d=new createjs.SpriteSheet({framerate:30,images:["app_img/tong_fall.png"],frames:{regX:0,regY:0,height:210,width:100,count:7},animations:{fall:[0,5,"down",.8],wait:[6],down:[5]}}),o=new b.Sprite(d,"wait");return o.name="ballFall",o.y=117*p,o.scaleX=o.scaleY=p,o.minX=(e+21)*p,o.maxX=(e+84)*p,i.addChild(l,t,o),i.x=e*p,i.y=n*p,i.clickNum=0,i}function t(e){var n=e.clickNum;if(!(n>1||u)){u=!0;var a=e.getChildByName("ballFall");a.oldY=a.y;var i=e.getChildByName("shdow");f=i,_=e,h=a,h.minHeight=475*p-e.y,i.alpha=0,a.gotoAndPlay("fall"),e.clickNum++,v>0&&(Y.text="x"+--v)}}function d(){M&&clearTimeout(M),k.removeAllChildren();var e=new createjs.SpriteSheet({framerate:1,images:["app_img/score.png"],frames:{regX:0,regY:0,height:39,width:54,count:10},animations:{s_1:[9],s_2:[8],s_3:[7],s_4:[6],s_5:[5],s_6:[4],s_7:[3],s_8:[2],s_9:[1],s_10:[0]}}),n=new b.Sprite(e);n.x=276*p,n.y=150*p;var l=i("你简直是神来之手,轻轻松松搞定"+y+"桶",84,740,30*p+"px Arial","#ffffff");n.gotoAndPlay("s_"+y),c.style.backgroundColor="#ef7b52",document.body.style.backgroundColor="#ef7b52";var t=a("app_img/play_again.png",260,810);t.addEventListener("click",function(){location.reload()});var d="M"==w?"app_img/man2.png":"app_img/woman2.png";X=a(d,0,70*p),X.x=240*p,X.y=406*p,X.scaleX=X.scaleY=.8*p,k.addChild(I,n,l,t,X)}var o=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,r=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=document.getElementById("gameview"),p=o/640,m=1.578125*o;r=r>m?r:m,c.width=o,c.height=r;var g="",u=!1,s=!1,h=null,f=null,_=null,v=10,y=0,w="M",x=null,b=createjs,k=new b.Stage(c),C=a("app_img/chose_role_bg.png",6*p,0),E=a("app_img/man.png",144,290,.5),S=a("app_img/woman.png",336,290,.5),A=null,X=null,L=a("app_img/begin-btn.png",256,812),Y=i("x10",432,42,36*p+"px Arial","#53d300"),N=i("x0",566,42,36*p+"px Arial","#ff1700"),H=5,M=null,T=a("app_img/playing-bg.png",0,0),B=l(21,268),F=l(120,98),P=l(247,233),W=l(384,114),j=l(507,191),I=a("app_img/game_over_bg.png",0,0);b.Sound.alternateExtensions=["mp3"],b.Sound.registerSound("app_img/music.mp3"),E.addEventListener("click",function(){1!==E.alpha&&(g=prompt("请输入角色名",""),null!=g&&(E.alpha=1,S.alpha=.5,w="M"))}),S.addEventListener("click",function(){1!==S.alpha&&(g=prompt("请输入角色名",""),null!=g&&(S.alpha=1,E.alpha=.5,w="F"))}),L.addEventListener("click",n),B.addEventListener("click",function(){t(B)}),F.addEventListener("click",function(){t(F)}),P.addEventListener("click",function(){t(P)}),W.addEventListener("click",function(){t(W)}),j.addEventListener("click",function(){t(j)}),b.Ticker.setFPS(30),b.Ticker.addEventListener("tick",function(e){if(k.update(),u&&h)if(h.y<h.minHeight)h.y+=3;else{var n=x.x,a=n+169*p,i=h.minX,l=h.maxX;(i>n&&a>i||l>n&&a>l)&&(b.Sound.play("app_img/music.mp3"),y++,N.text="x"+(y>10?10:y),s=!1,X.alpha=1,A.alpha=0,M=setTimeout(function(){s=!0,X.alpha=0,A.alpha=1},1e3)),_&&_.clickNum<2?(u=!1,h.y=h.oldY,h.gotoAndPlay("wait"),f.alpha=1):(u=!1,h.alpha=0),0===v&&d()}if(s){var t=x.x;(t>=o-120*p||-20>=t)&&(H=0-H),x.x+=H}}),e()}();
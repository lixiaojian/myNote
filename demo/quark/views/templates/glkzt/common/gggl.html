<div class="container-fluid" data-ng-controller="adCtr">
    <h4 class="sub-title">{{modileTitle}}</h4>
    <form class="form-horizontal">
        <div class="form-group">
            <label for="publishChannel" class="control-label col-sm-2">发布渠道：</label>
            <div class="col-sm-2">
                <select class="form-control" data-ng-model="searchAd.channelCode" id="publishChannel">
                    <option value="">全部</option>
                    <option value="100001">APP</option>
                    <option value="100002">微信</option>
                    <option value="100003">PC</option>
                </select>
            </div>

            <label for="adType" class="control-label col-sm-2">广告类型：</label>
            <div class="col-sm-2">
                <select class="form-control" data-ng-model="searchAd.adPostion" id="adType">
                    <option value="">全部</option>
                    <option value="1">首页banner</option>
                    <option value="2">启动加载页</option>
                </select>
            </div>
        </div>
    </form>
    <div class="btn-box clearfix">
        <a class="btn btn-default pull-right" href="javascript:" data-ng-click="search()" role="button">查 询</a>
        <a class="btn btn-default pull-right" href="javascript:" ng-click="bannerDetail('add')" role="button">新 增</a>
    </div>

    <table class="table table-striped table-bordered">
        <thead>
        <tr>
            <th>发布渠道</th>
            <th>版本号</th>
            <th>广告类型</th>
            <th>广告状态</th>
            <th>操作者</th>
            <th>操作时间</th>
            <th>操作</th>
        </tr>
        </thead>
        <tbody>
        <tr data-ng-repeat="ad in adList">
            <td>{{ad.channelCode=='100001'?'APP':ad.channelCode==='100002'?'微信':'PC'}}</td>
            <td>{{ad.adVersionCode}}</td>
            <td>{{ad.adPostion ==1?'首页banner': ad.adPostion ==2?'启动加载页':'全部'}}</td>
            <td>{{ad.adAdvertState ==0?'默认':'非默认'}}</td>
            <td>{{ad.operator}}</td>
            <td>{{ad.operateTime | date:'yyyy-MM-dd HH:mm:ss'}}</td>
            <td>
                <a class="btn btn-default" href="javascript:" ng-click="bannerDetail('select',ad.id)" role="button">查 看</a>
                <a class="btn btn-default" href="javascript:" ng-click="bannerDetail('update',ad.id)" role="button">编 辑</a>
                <a class="btn btn-default" href="javascript:" ng-click="deleteAd(ad.id,$index,ad.adAdvertState)" role="button">删 除</a>
            </td>
        </tr>
        </tbody>
    </table>
    <!--分页-->
    <div class="clearfix">
        <div data-pagination data-total-items="page.totalItems" data-ng-model="page.curPage" data-max-size="page.maxSize" data-items-per-page="page.itemsPerPage" data-boundary-links="page.boundaryLinks" data-ng-change="changePage()"
             data-previous-text="{{page.previousText}}" data-next-text="{{page.nextText}}" data-first-text="{{page.firstText}}" data-last-text="{{page.lastText}}"></div>
    </div>

    <script type="text/ng-template" id="bannerDetail.html">
        <div class="modal-header">
            
        </div>
        <div class="modal-body">
            <form class="form-horizontal bannerDetail">
                <div class="form-group">
                    <label for="adType" class="control-label col-sm-2"><span class="t_c_r">*</span> 广告类型：</label>
                    <div class="col-sm-6">
                        <select data-ng-disabled="disabled" class="form-control" data-ng-model="curAd.adPostion">
                            <option value="">请选择</option>
                            <option value="1">首页banner</option>
                            <option value="2">启动加载页</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label"><span class="t_c_r">*</span> 发布渠道：</label>
                    <div class="col-sm-8">
                        <label class="radio-inline">
                            <input data-ng-disabled="disabled" data-ng-model="curAd.channelCode" value="100001" type="radio" name="publishChannel"> APP
                        </label>
                        <label class="radio-inline">
                            <input data-ng-disabled="disabled" data-ng-model="curAd.channelCode" value="100002" type="radio" name="publishChannel"> 微信
                        </label>
                        <label class="radio-inline">
                            <input data-ng-disabled="disabled" data-ng-model="curAd.channelCode" value="100003" type="radio" name="publishChannel"> PC
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-sm-2 control-label"><span class="t_c_r">*</span> 版本号：</label>
                    <div class="col-sm-2">
                        <input data-ng-disabled="disabled" data-ng-model="curAd.adVersionCode" type="text" class="form-control"/>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label"><span class="t_c_r">*</span> 广告状态：</label>
                    <div class="col-sm-4">
                        <label class="radio-inline">
                            <input data-ng-disabled="disabled" data-ng-model="curAd.adAdvertState" value="0" type="radio" name="adType"> 默认
                        </label>
                        <label class="radio-inline">
                            <input data-ng-disabled="disabled" data-ng-model="curAd.adAdvertState" value="1" type="radio" name="adType"> 非默认
                        </label>
                    </div>
                </div>

                <div class="form-group clearfix">
                    <!--<label class="col-sm-2 control-label"><span class="t_c_r">*</span> 广告图片：</label>-->
                    <div class="col-sm-11">
                        <a data-ng-if="!disabled" class="btn btn-sm btn-default pull-right" href="javascript:" data-ng-click="addImg()" role="button">新增一行</a>
                    </div>
                </div>

                <div style="border-top: 1px dashed #ccc" class="adBox" data-ng-repeat="img in curAd.picList">
                    <div class="form-group">
                        <label class="col-sm-2 control-label"><span class="t_c_r">*</span> 图片：</label>
                        <div class="col-sm-5">
                            <input type="text" data-ng-disabled="disabled" data-ng-model="img.adContent" class="form-control"/>
                        </div>
                        <div class="col-sm-1" data-ng-if="!disabled">
                            <span input-file title="上传" filetype="jpg,png" model="img.adContent"></span>
                        </div>
                        <div class="col-sm-1">
                            <a class="btn btn-sm btn-default" target="_blank" data-ng-href="{{img.fullPath}}" role="button">下载</a>
                        </div>

                        <div class="col-sm-2 pull-right">
                            <span data-ng-if="!disabled && !$first && !isNew" data-ng-click="upOrDown(curAd.picList[$index-1],img)" class="glyphicon glyphicon-arrow-up up-down-icno"></span>
                            <span data-ng-if="!disabled && !$last && !isNew" data-ng-click="upOrDown(curAd.picList[$index+1],img)" class="glyphicon glyphicon-arrow-down up-down-icno"></span>
                            <span data-ng-if="!disabled && !$first" data-ng-click="removeImg($index)" style="font-size: 20px" class="delete-btn glyphicon glyphicon-remove"></span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">链接形式：</label>
                        <div class="col-sm-6">
                            <label class="radio-inline">
                                <input type="radio" data-ng-model="img.adcontype" value="0" data-ng-disabled="disabled" id="linkType2" name="linkType{{$index}}"> html
                            </label>
                            <label class="radio-inline">
                                <input type="radio" data-ng-model="img.adcontype" value="1" data-ng-disabled="disabled" name="linkType{{$index}}"> 图片
                            </label>
                        </div>
                    </div>
                    <div class="form-group" data-ng-if="img.adcontype=='0'">
                        <label class="col-sm-2 control-label">链接url：</label>
                        <div class="col-sm-6">
                            <input type="text" data-ng-model="img.adAction" data-ng-disabled="disabled" class="form-control"/>
                        </div>
                    </div>
                    <div class="form-group" data-ng-if="img.adcontype=='1'">
                        <label class="col-sm-2 control-label">链接图片：</label>
                        <div class="col-sm-5">
                            <input type="text" data-ng-model="img.linkImg" data-ng-disabled="disabled" class="form-control"/>
                        </div>
                        <div class="col-sm-1" data-ng-if="!disabled">
                            <span input-file title="上传" model="img.linkImg"></span>
                        </div>
                        <div class="col-sm-1">
                            <a class="btn btn-sm btn-default" target="_blank" data-ng-href="{{img.imgPath}}" role="button">下载</a>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">备注：</label>
                        <div class="col-sm-6">
                            <input type="text" data-ng-model="img.adDesc" class="form-control"/>
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <a data-ng-if="!disabled" class="btn btn-primary" ng-click="ok()">保 存</a>
                    <a data-ng-if="!disabled" class="btn btn-warning" ng-click="cancel()">返 回</a>
                    <a data-ng-if="disabled" class="btn btn-default" ng-click="cancel()">关 闭</a>
                </div>
            </form>
        </div>
    </script>
</div>
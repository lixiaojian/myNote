<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">var UTIL = UTIL || {};
<span id='UTIL-dom'>/**
</span> * &lt;h2&gt;工具类(对dom节点进行操作)&lt;/h2&gt;
 * @class UTIL.dom
 * @static
 */
UTIL.dom = UTIL.dom || {
<span id='UTIL-dom-method-genCurrentStyle'>        /**
</span>         * 获取dom节点的CSS属性值
         * @method
         * @param {Object}domNode
         *     需要获取的元素节点
         * @returns {Object}result
         *      CSS属性对象
         */
        genCurrentStyle: function(domNode){
            var computedStyle = null;
            if(document.defaultView.getComputedStyle) return document.defaultView.getComputedStyle(domNode, null);
            else if(domNode &amp;&amp; domNode.currentStyle) return currentStyle;
            return computedStyle;
        },
<span id='UTIL-dom-method-filterElemByClass'>        /**
</span>         * 通过className获取元素节点
         * @method
         * @param {Object}p
         *     需要查询的父节点
         * @param {String}tagName
         *      标签类型
         * @param {String}clsName
         *      className
         * @returns {Array}result
         */
        filterElemByClass: function(p, tagName, clsName){
            var cons = p.getElementsByTagName(tagName) || [];
            var result = [];
            var t = {};
            for(var i = 0, l = cons.length;i &lt; l;i++){
                t = cons[i];
                if(t &amp;&amp; t.className &amp;&amp; t.className.indexOf(clsName) &gt; -1){
                    result.push(t);
                }
            }
            return result;
        },
<span id='UTIL-dom-method-filterElemByAttrVal'>        /**
</span>         * 通过元素属性获取元素
         * @method
         * @param {Object}p
         *      需要查询的父节点
         * @param {String}tagName
         *      标签类型
         * @param {String}atttName
         *      属性名称
         * @param {String}atttVal
         *      属性值
         * @returns {Array} result
         */
        filterElemByAttrVal: function(p, tagName, atttName, atttVal){
            var cons = p.getElementsByTagName(tagName) || [];
            var result = [];
            var t = {};
            for(var i = 0, l = cons.length;i &lt; l;i++){
                t = cons[i];
                if(t &amp;&amp; ((t[atttName] &amp;&amp; t[atttName].indexOf(atttVal) &gt; -1) || t.getAttribute &amp;&amp; t.getAttribute(atttName) &amp;&amp; t.getAttribute(atttName).indexOf(atttVal) &gt; -1)){
                    result.push(t);
                }
            }
            return result;
        },
<span id='UTIL-dom-method-addClass'>        /**
</span>         * 给元素添加class
         * @method
         * @param {Object}item
         *     目标元素
         * @param {String}cls
         *      className
         */
        addClass: function(item, cls){
            if(UTIL.dom.hasClass(item, cls)) return;
            var tcls = item.className;
            tcls=tcls?(tcls+&#39; &#39;+cls):cls;
            item.className = tcls;
        },
<span id='UTIL-dom-method-removeClass'>        /**
</span>         * 移除元素的class
         * @method
         * @param {Object}item
         *      目标元素
         * @param {String}cls
         *      需要移除的className
         */
        removeClass: function(item, cls){
            var rgex = new RegExp(cls, &#39;gi&#39;);
            item.className = item.className.replace(rgex, &#39;&#39;);
        },
<span id='UTIL-dom-method-hasClass'>        /**
</span>         * 判断一个元素是否拥有某个className
         * @method
         * @param {Object}item
         *      目标元素
         * @param {String}cls
         *      className
         * @returns {Boolean}result
         */
        hasClass: function(item, cls){
            var rgex = new RegExp(cls, &#39;gi&#39;);
            var tcls = item.className;
            return rgex.test(tcls);
        },
<span id='UTIL-dom-method-getElemCoordinate'>        /**
</span>         * 获取元素的偏移量
         * @method
         * @param {Object}elem
         *      目标元素
         * @returns {Object}result
         */
        getElemCoordinate: function(elem){
            var t = elem.offsetTop;
            var l = elem.offsetLeft;
            var w = elem.offsetWidth;
            var h = elem.offsetHeight;
            while(elem = elem.offsetParent){
                t += elem.offsetTop;
                l += elem.offsetLeft;
            }
            return{
                width: w,
                height: h,
                top: t,
                left: l,
                bottom: t + h,
                right: l + w
            };
        }
    };</pre>
</body>
</html>
